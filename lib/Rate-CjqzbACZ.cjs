"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue"),i=require("./index-BWWm-k8Z.cjs"),F=require("./KeyCode-BtL9tph1.cjs"),A=require("./useRefs-CgSMRk3N.cjs");function X(e){let t=e.scrollX;const o="scrollLeft";if(typeof t!="number"){const c=e.document;t=c.documentElement[o],typeof t!="number"&&(t=c.body[o])}return t}function q(e){let t,o;const c=e.ownerDocument,{body:u}=c,C=c&&c.documentElement,y=e.getBoundingClientRect();return t=y.left,o=y.top,t-=C.clientLeft||u.clientLeft||0,o-=C.clientTop||u.clientTop||0,{left:t,top:o}}function G(e){const t=q(e),o=e.ownerDocument,c=o.defaultView||o.parentWindow;return t.left+=X(c),t.left}var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};function B(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},c=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),c.forEach(function(u){U(e,u,o[u])})}return e}function U(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var H=function(t,o){var c=B({},t,o.attrs);return a.createVNode(i.Icon,B({},c,{icon:W}),null)};H.displayName="StarFilled";H.inheritAttrs=!1;const J={value:Number,index:Number,prefixCls:String,allowHalf:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},character:i.PropTypes.any,characterRender:Function,focused:{type:Boolean,default:void 0},count:Number,onClick:Function,onHover:Function},Q=a.defineComponent({compatConfig:{MODE:3},name:"Star",inheritAttrs:!1,props:J,emits:["hover","click"],setup(e,t){let{emit:o}=t;const c=r=>{const{index:v}=e;o("hover",r,v)},u=r=>{const{index:v}=e;o("click",r,v)},C=r=>{const{index:v}=e;r.keyCode===13&&o("click",r,v)},y=a.computed(()=>{const{prefixCls:r,index:v,value:g,allowHalf:S,focused:p}=e,b=v+1;let h=r;return g===0&&v===0&&p?h+=` ${r}-focused`:S&&g+.5>=b&&g<b?(h+=` ${r}-half ${r}-active`,p&&(h+=` ${r}-focused`)):(h+=b<=g?` ${r}-full`:` ${r}-zero`,b===g&&p&&(h+=` ${r}-focused`)),h});return()=>{const{disabled:r,prefixCls:v,characterRender:g,character:S,index:p,count:b,value:h}=e,n=typeof S=="function"?S({disabled:r,prefixCls:v,index:p,count:b,value:h}):S;let w=a.createVNode("li",{class:y.value},[a.createVNode("div",{onClick:r?null:u,onKeydown:r?null:C,onMousemove:r?null:c,role:"radio","aria-checked":h>p?"true":"false","aria-posinset":p+1,"aria-setsize":b,tabindex:r?-1:0},[a.createVNode("div",{class:`${v}-first`},[n]),a.createVNode("div",{class:`${v}-second`},[n])])]);return g&&(w=g(w,e)),w}}}),Y=e=>{const{componentCls:t}=e;return{[`${t}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.rateStarHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${e.lineWidth}px dashed ${e.rateStarColor}`,transform:e.rateStarHoverScale}},"&-first, &-second":{color:e.defaultColor,transition:`all ${e.motionDurationMid}`,userSelect:"none",[e.iconCls]:{verticalAlign:"middle"}},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${t}-star-first, &-half ${t}-star-second`]:{opacity:1},[`&-half ${t}-star-first, &-full ${t}-star-second`]:{color:"inherit"}}}},Z=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),k=e=>{const{componentCls:t}=e;return{[t]:i._extends(i._extends(i._extends(i._extends(i._extends({},i.resetComponent(e)),{display:"inline-block",margin:0,padding:0,color:e.rateStarColor,fontSize:e.rateStarSize,lineHeight:"unset",listStyle:"none",outline:"none",[`&-disabled${t} ${t}-star`]:{cursor:"default","&:hover":{transform:"scale(1)"}}}),Y(e)),{[`+ ${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,fontSize:e.fontSize}}),Z(e))}},ee=i.genComponentStyleHook("Rate",e=>{const{colorFillContent:t}=e,o=i.merge(e,{rateStarColor:e["yellow-6"],rateStarSize:e.controlHeightLG*.5,rateStarHoverScale:"scale(1.1)",defaultColor:t});return[k(o)]}),te=()=>({prefixCls:String,count:Number,value:Number,allowHalf:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},tooltips:Array,disabled:{type:Boolean,default:void 0},character:i.PropTypes.any,autofocus:{type:Boolean,default:void 0},tabindex:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.string]),direction:String,id:String,onChange:Function,onHoverChange:Function,"onUpdate:value":Function,onFocus:Function,onBlur:Function,onKeydown:Function}),ne=a.defineComponent({compatConfig:{MODE:3},name:"ARate",inheritAttrs:!1,props:i.initDefaultProps(te(),{value:0,count:5,allowHalf:!1,allowClear:!0,tabindex:0,direction:"ltr"}),setup(e,t){let{slots:o,attrs:c,emit:u,expose:C}=t;const{prefixCls:y,direction:r}=i.useConfigInject("rate",e),[v,g]=ee(y),S=i.useInjectFormItemContext(),p=a.ref(),[b,h]=A.useRefs(),n=a.reactive({value:e.value,focused:!1,cleanedValue:null,hoverValue:void 0});a.watch(()=>e.value,()=>{n.value=e.value});const w=l=>i.findDOMNode(h.value.get(l)),N=(l,d)=>{const s=r.value==="rtl";let f=l+1;if(e.allowHalf){const m=w(l),R=G(m),V=m.clientWidth;(s&&d-R>V/2||!s&&d-R<V/2)&&(f-=.5)}return f},x=l=>{e.value===void 0&&(n.value=l),u("update:value",l),u("change",l),S.onFieldChange()},T=(l,d)=>{const s=N(d,l.pageX);s!==n.cleanedValue&&(n.hoverValue=s,n.cleanedValue=null),u("hoverChange",s)},P=()=>{n.hoverValue=void 0,n.cleanedValue=null,u("hoverChange",void 0)},_=(l,d)=>{const{allowClear:s}=e,f=N(d,l.pageX);let m=!1;s&&(m=f===n.value),P(),x(m?0:f),n.cleanedValue=m?f:null},I=l=>{n.focused=!0,u("focus",l)},L=l=>{n.focused=!1,u("blur",l),S.onFieldBlur()},M=l=>{const{keyCode:d}=l,{count:s,allowHalf:f}=e,m=r.value==="rtl";d===F.KeyCode.RIGHT&&n.value<s&&!m?(f?n.value+=.5:n.value+=1,x(n.value),l.preventDefault()):d===F.KeyCode.LEFT&&n.value>0&&!m||d===F.KeyCode.RIGHT&&n.value>0&&m?(f?n.value-=.5:n.value-=1,x(n.value),l.preventDefault()):d===F.KeyCode.LEFT&&n.value<s&&m&&(f?n.value+=.5:n.value+=1,x(n.value),l.preventDefault()),u("keydown",l)},D=()=>{e.disabled||p.value.focus()};C({focus:D,blur:()=>{e.disabled||p.value.blur()}}),a.onMounted(()=>{const{autofocus:l,disabled:d}=e;l&&!d&&D()});const z=(l,d)=>{let{index:s}=d;const{tooltips:f}=e;return f?a.createVNode(i.Tooltip,{title:f[s]},{default:()=>[l]}):l};return()=>{const{count:l,allowHalf:d,disabled:s,tabindex:f,id:m=S.id.value}=e,{class:R,style:V}=c,O=[],E=s?`${y.value}-disabled`:"",j=e.character||o.character||(()=>a.createVNode(H,null,null));for(let $=0;$<l;$++)O.push(a.createVNode(Q,{ref:b($),key:$,index:$,count:l,disabled:s,prefixCls:`${y.value}-star`,allowHalf:d,value:n.hoverValue===void 0?n.value:n.hoverValue,onClick:_,onHover:T,character:j,characterRender:z,focused:n.focused},null));const K=i.classNames(y.value,E,R,{[g.value]:!0,[`${y.value}-rtl`]:r.value==="rtl"});return v(a.createVNode("ul",i._objectSpread2(i._objectSpread2({},c),{},{id:m,class:K,style:V,onMouseleave:s?null:P,tabindex:s?-1:f,onFocus:s?null:I,onBlur:s?null:L,onKeydown:s?null:M,ref:p,role:"radiogroup"}),[O]))}}}),le=i.withInstall(ne),oe=a.defineComponent({__name:"Rate",setup(e){return(t,o)=>(a.openBlock(),a.createBlock(a.unref(le),a.normalizeProps(a.guardReactiveProps(t.$attrs)),a.createSlots({_:2},[a.renderList(t.$slots,(c,u)=>({name:u,fn:a.withCtx(C=>[a.renderSlot(t.$slots,u,a.normalizeProps(a.guardReactiveProps(C||{})))])}))]),1040))}});exports.default=oe;

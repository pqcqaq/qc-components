"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),t=require("./index-D15YARE8.cjs");function ne(e){const{selectionStart:i}=e;return e.value.slice(0,i)}function oe(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(Array.isArray(i)?i:[i]).reduce((o,a)=>{const p=e.lastIndexOf(a);return p>o.location?{location:p,prefix:a}:o},{location:-1,prefix:""})}function k(e){return(e||"").toLowerCase()}function re(e,i,r){const o=e[0];if(!o||o===r)return e;let a=e;const p=i.length;for(let u=0;u<p;u+=1)if(k(a[u])!==k(i[u])){a=a.slice(u);break}else u===p-1&&(a=a.slice(p));return a}function ie(e,i){const{measureLocation:r,prefix:o,targetText:a,selectionStart:p,split:u}=i;let d=e.slice(0,r);d[d.length-u.length]===u&&(d=d.slice(0,d.length-u.length)),d&&(d=`${d}${u}`);let f=re(e.slice(p),a.slice(p-r-o.length),u);f.slice(0,u.length)===u&&(f=f.slice(u.length));const s=`${d}${o}${a}${u}`;return{text:`${s}${f}`,selectionLocation:s.length}}function se(e,i){e.setSelectionRange(i,i),e.blur(),e.focus()}function ae(e,i){const{split:r}=i;return!r||e.indexOf(r)===-1}function le(e,i){let{value:r=""}=i;const o=e.toLowerCase();return r.toLowerCase().indexOf(o)!==-1}const q=Symbol("MentionsContextKey");function ue(){}const ce=n.defineComponent({compatConfig:{MODE:3},name:"DropdownMenu",props:{prefixCls:String,options:{type:Array,default:()=>[]}},setup(e,i){let{slots:r}=i;const{activeIndex:o,setActiveIndex:a,selectOption:p,onFocus:u=ue,loading:d}=n.inject(q,{activeIndex:n.shallowRef(),loading:n.shallowRef(!1)});let f;const s=b=>{clearTimeout(f),f=setTimeout(()=>{u(b)})};return n.onBeforeUnmount(()=>{clearTimeout(f)}),()=>{var b;const{prefixCls:I,options:C}=e,x=C[o.value]||{};return n.createVNode(t.Menu,{prefixCls:`${I}-menu`,activeKey:x.value,onSelect:h=>{let{key:y}=h;const S=C.find(w=>{let{value:O}=w;return O===y});p(S)},onMousedown:s},{default:()=>[!d.value&&C.map((h,y)=>{var S,w;const{value:O,disabled:E,label:N=h.value,class:$,style:V}=h;return n.createVNode(t.MenuItem,{key:O,disabled:E,onMouseenter:()=>{a(y)},class:$,style:V},{default:()=>[(w=(S=r.option)===null||S===void 0?void 0:S.call(r,h))!==null&&w!==void 0?w:typeof N=="function"?N(h):N]})}),!d.value&&C.length===0?n.createVNode(t.MenuItem,{key:"notFoundContent",disabled:!0},{default:()=>[(b=r.notFoundContent)===null||b===void 0?void 0:b.call(r)]}):null,d.value&&n.createVNode(t.MenuItem,{key:"loading",disabled:!0},{default:()=>[n.createVNode(t.Spin,{size:"small"},null)]})]})}}}),de={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},bottomLeft:{points:["tr","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:["br","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},pe=n.defineComponent({compatConfig:{MODE:3},name:"KeywordTrigger",props:{loading:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},prefixCls:String,placement:String,visible:{type:Boolean,default:void 0},transitionName:String,getPopupContainer:Function,direction:String,dropdownClassName:String},setup(e,i){let{slots:r}=i;const o=()=>`${e.prefixCls}-dropdown`,a=()=>{const{options:u}=e;return n.createVNode(ce,{prefixCls:o(),options:u},{notFoundContent:r.notFoundContent,option:r.option})},p=n.computed(()=>{const{placement:u,direction:d}=e;let f="topRight";return d==="rtl"?f=u==="top"?"topLeft":"bottomLeft":f=u==="top"?"topRight":"bottomRight",f});return()=>{const{visible:u,transitionName:d,getPopupContainer:f}=e;return n.createVNode(t.Trigger,{prefixCls:o(),popupVisible:u,popup:a(),popupClassName:e.dropdownClassName,popupPlacement:p.value,popupTransitionName:d,builtinPlacements:de,getPopupContainer:f},{default:r.default})}}}),fe=t.tuple("top","bottom"),G={autofocus:{type:Boolean,default:void 0},prefix:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.arrayOf(t.PropTypes.string)]),prefixCls:String,value:String,disabled:{type:Boolean,default:void 0},split:String,transitionName:String,placement:t.PropTypes.oneOf(fe),character:t.PropTypes.any,characterRender:Function,filterOption:{type:[Boolean,Function]},validateSearch:Function,getPopupContainer:{type:Function},options:t.arrayType(),loading:{type:Boolean,default:void 0},rows:[Number,String],direction:{type:String}},J=t._extends(t._extends({},G),{dropdownClassName:String}),Q={prefix:"@",split:" ",rows:1,validateSearch:ae,filterOption:()=>le};t.initDefaultProps(J,Q);var U=function(e,i){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)i.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r};function X(){}const ge=n.defineComponent({compatConfig:{MODE:3},name:"Mentions",inheritAttrs:!1,props:t.initDefaultProps(J,Q),emits:["change","select","search","focus","blur","pressenter"],setup(e,i){let{emit:r,attrs:o,expose:a,slots:p}=i;const u=n.ref(null),d=n.ref(null),f=n.ref(),s=n.reactive({value:e.value||"",measuring:!1,measureLocation:0,measureText:null,measurePrefix:"",activeIndex:0,isFocus:!1});n.watchEffect(()=>{s.value=e.value});const b=c=>{r("change",c)},I=c=>{let{target:{value:g}}=c;b(g)},C=(c,g,l)=>{t._extends(s,{measuring:!0,measureText:c,measurePrefix:g,measureLocation:l,activeIndex:0})},x=c=>{t._extends(s,{measuring:!1,measureLocation:0,measureText:null}),c==null||c()},h=c=>{const{which:g}=c;if(s.measuring){if(g===t.KeyCode.UP||g===t.KeyCode.DOWN){const l=B.value.length,v=g===t.KeyCode.UP?-1:1,m=(s.activeIndex+v+l)%l;s.activeIndex=m,c.preventDefault()}else if(g===t.KeyCode.ESC)x();else if(g===t.KeyCode.ENTER){if(c.preventDefault(),!B.value.length){x();return}const l=B.value[s.activeIndex];$(l)}}},y=c=>{const{key:g,which:l}=c,{measureText:v,measuring:m}=s,{prefix:P,validateSearch:A}=e,T=c.target;if(T.composing)return;const R=ne(T),{location:M,prefix:F}=oe(R,P);if([t.KeyCode.ESC,t.KeyCode.UP,t.KeyCode.DOWN,t.KeyCode.ENTER].indexOf(l)===-1)if(M!==-1){const _=R.slice(M+F.length),j=A(_,e),L=!!D(_).length;j?(g===F||g==="Shift"||m||_!==v&&L)&&C(_,F,M):m&&x(),j&&r("search",_,F)}else m&&x()},S=c=>{s.measuring||r("pressenter",c)},w=c=>{E(c)},O=c=>{N(c)},E=c=>{clearTimeout(f.value);const{isFocus:g}=s;!g&&c&&r("focus",c),s.isFocus=!0},N=c=>{f.value=setTimeout(()=>{s.isFocus=!1,x(),r("blur",c)},100)},$=c=>{const{split:g}=e,{value:l=""}=c,{text:v,selectionLocation:m}=ie(s.value,{measureLocation:s.measureLocation,targetText:l,prefix:s.measurePrefix,selectionStart:d.value.getSelectionStart(),split:g});b(v),x(()=>{se(d.value.input,m)}),r("select",c,s.measurePrefix)},V=c=>{s.activeIndex=c},D=c=>{const g=c||s.measureText||"",{filterOption:l}=e;return e.options.filter(m=>l?l(g,m):!0)},B=n.computed(()=>D());return a({blur:()=>{d.value.blur()},focus:()=>{d.value.focus()}}),n.provide(q,{activeIndex:n.toRef(s,"activeIndex"),setActiveIndex:V,selectOption:$,onFocus:E,onBlur:N,loading:n.toRef(e,"loading")}),n.onUpdated(()=>{n.nextTick(()=>{s.measuring&&(u.value.scrollTop=d.value.getScrollTop())})}),()=>{const{measureLocation:c,measurePrefix:g,measuring:l}=s,{prefixCls:v,placement:m,transitionName:P,getPopupContainer:A,direction:T}=e,R=U(e,["prefixCls","placement","transitionName","getPopupContainer","direction"]),{class:M,style:F}=o,_=U(o,["class","style"]),j=t.omit(R,["value","prefix","split","validateSearch","filterOption","options","loading"]),L=t._extends(t._extends(t._extends({},j),_),{onChange:X,onSelect:X,value:s.value,onInput:I,onBlur:O,onKeydown:h,onKeyup:y,onFocus:w,onPressenter:S});return n.createVNode("div",{class:t.classNames(v,M),style:F},[n.createVNode(t.BaseInput,t._objectSpread2(t._objectSpread2({},L),{},{ref:d,tag:"textarea"}),null),l&&n.createVNode("div",{ref:u,class:`${v}-measure`},[s.value.slice(0,c),n.createVNode(pe,{prefixCls:v,transitionName:P,dropdownClassName:e.dropdownClassName,placement:m,options:l?B.value:[],visible:!0,direction:T,getPopupContainer:A},{default:()=>[n.createVNode("span",null,[g])],notFoundContent:p.notFoundContent,option:p.option}),s.value.slice(c+g.length)])])}}}),me={value:String,disabled:Boolean,payload:t.objectType()},Z=t._extends(t._extends({},me),{label:t.anyType([])}),ee={name:"Option",props:Z,render(e,i){let{slots:r}=i;var o;return(o=r.default)===null||o===void 0?void 0:o.call(r)}};n.defineComponent(t._extends({compatConfig:{MODE:3}},ee));const ve=e=>{const{componentCls:i,colorTextDisabled:r,controlItemBgHover:o,controlPaddingHorizontal:a,colorText:p,motionDurationSlow:u,lineHeight:d,controlHeight:f,inputPaddingHorizontal:s,inputPaddingVertical:b,fontSize:I,colorBgElevated:C,borderRadiusLG:x,boxShadowSecondary:h}=e,y=Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2);return{[i]:t._extends(t._extends(t._extends(t._extends(t._extends({},t.resetComponent(e)),t.genBasicInputStyle(e)),{position:"relative",display:"inline-block",height:"auto",padding:0,overflow:"hidden",lineHeight:d,whiteSpace:"pre-wrap",verticalAlign:"bottom"}),t.genStatusStyle(e,i)),{"&-disabled":{"> textarea":t._extends({},t.genDisabledStyle(e))},"&-focused":t._extends({},t.genActiveStyle(e)),[`&-affix-wrapper ${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:s,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto"},[`> textarea, ${i}-measure`]:{color:p,boxSizing:"border-box",minHeight:f-2,margin:0,padding:`${b}px ${s}px`,overflow:"inherit",overflowX:"hidden",overflowY:"auto",fontWeight:"inherit",fontSize:"inherit",fontFamily:"inherit",fontStyle:"inherit",fontVariant:"inherit",fontSizeAdjust:"inherit",fontStretch:"inherit",lineHeight:"inherit",direction:"inherit",letterSpacing:"inherit",whiteSpace:"inherit",textAlign:"inherit",verticalAlign:"top",wordWrap:"break-word",wordBreak:"inherit",tabSize:"inherit"},"> textarea":t._extends({width:"100%",border:"none",outline:"none",resize:"none",backgroundColor:"inherit"},t.genPlaceholderStyle(e.colorTextPlaceholder)),[`${i}-measure`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:-1,color:"transparent",pointerEvents:"none","> span":{display:"inline-block",minHeight:"1em"}},"&-dropdown":t._extends(t._extends({},t.resetComponent(e)),{position:"absolute",top:-9999,insetInlineStart:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",fontSize:I,fontVariant:"initial",backgroundColor:C,borderRadius:x,outline:"none",boxShadow:h,"&-hidden":{display:"none"},[`${i}-dropdown-menu`]:{maxHeight:e.dropdownHeight,marginBottom:0,paddingInlineStart:0,overflow:"auto",listStyle:"none",outline:"none","&-item":t._extends(t._extends({},t.textEllipsis),{position:"relative",display:"block",minWidth:e.controlItemWidth,padding:`${y}px ${a}px`,color:p,fontWeight:"normal",lineHeight:d,cursor:"pointer",transition:`background ${u} ease`,"&:hover":{backgroundColor:o},"&:first-child":{borderStartStartRadius:x,borderStartEndRadius:x,borderEndStartRadius:0,borderEndEndRadius:0},"&:last-child":{borderStartStartRadius:0,borderStartEndRadius:0,borderEndStartRadius:x,borderEndEndRadius:x},"&-disabled":{color:r,cursor:"not-allowed","&:hover":{color:r,backgroundColor:o,cursor:"not-allowed"}},"&-selected":{color:p,fontWeight:e.fontWeightStrong,backgroundColor:o},"&-active":{backgroundColor:o}})}})})}},xe=t.genComponentStyleHook("Mentions",e=>{const i=t.initInputToken(e);return[ve(i)]},e=>({dropdownHeight:250,controlItemWidth:100,zIndexPopup:e.zIndexPopupBase+50}));var Y=function(e,i){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)i.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r};function he(){return!0}const be=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{prefix:r="@",split:o=" "}=i,a=Array.isArray(r)?r:[r];return e.split(o).map(function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=null;return a.some(d=>p.slice(0,d.length)===d?(u=d,!0):!1),u!==null?{prefix:u,value:p.slice(u.length)}:null}).filter(p=>!!p&&!!p.value)},Ce=()=>t._extends(t._extends({},G),{loading:{type:Boolean,default:void 0},onFocus:{type:Function},onBlur:{type:Function},onSelect:{type:Function},onChange:{type:Function},onPressenter:{type:Function},"onUpdate:value":{type:Function},notFoundContent:t.PropTypes.any,defaultValue:String,id:String,status:String}),z=n.defineComponent({compatConfig:{MODE:3},name:"AMentions",inheritAttrs:!1,props:Ce(),slots:Object,setup(e,i){let{slots:r,emit:o,attrs:a,expose:p}=i;var u,d,f;process.env.NODE_ENV!=="production"&&t.devWarning(!t.flattenChildren(((u=r.default)===null||u===void 0?void 0:u.call(r))||[]).length,"Mentions","`Mentions.Option` is deprecated. Please use `options` instead.");const{prefixCls:s,renderEmpty:b,direction:I}=t.useConfigInject("mentions",e),[C,x]=xe(s),h=n.shallowRef(!1),y=n.shallowRef(null),S=n.shallowRef((f=(d=e.value)!==null&&d!==void 0?d:e.defaultValue)!==null&&f!==void 0?f:""),w=t.useInjectFormItemContext(),O=t.FormItemInputContext.useInject(),E=n.computed(()=>t.getMergedStatus(O.status,e.status));t.useProvideOverride({prefixCls:n.computed(()=>`${s.value}-menu`),mode:n.computed(()=>"vertical"),selectable:n.computed(()=>!1),onClick:()=>{},validator:l=>{let{mode:v}=l;t.warning(!v||v==="vertical","Mentions",`mode="${v}" is not supported for Mentions's Menu.`)}}),n.watch(()=>e.value,l=>{S.value=l});const N=l=>{h.value=!0,o("focus",l)},$=l=>{h.value=!1,o("blur",l),w.onFieldBlur()},V=function(){for(var l=arguments.length,v=new Array(l),m=0;m<l;m++)v[m]=arguments[m];o("select",...v),h.value=!0},D=l=>{e.value===void 0&&(S.value=l),o("update:value",l),o("change",l),w.onFieldChange()},B=()=>{const l=e.notFoundContent;return l!==void 0?l:r.notFoundContent?r.notFoundContent():b("Select")},H=()=>{var l;return t.flattenChildren(((l=r.default)===null||l===void 0?void 0:l.call(r))||[]).map(v=>{var m,P;return t._extends(t._extends({},t.getOptionProps(v)),{label:(P=(m=v.children)===null||m===void 0?void 0:m.default)===null||P===void 0?void 0:P.call(m)})})};p({focus:()=>{y.value.focus()},blur:()=>{y.value.blur()}});const g=n.computed(()=>e.loading?he:e.filterOption);return()=>{const{disabled:l,getPopupContainer:v,rows:m=1,id:P=w.id.value}=e,A=Y(e,["disabled","getPopupContainer","rows","id"]),{hasFeedback:T,feedbackIcon:R}=O,{class:M}=a,F=Y(a,["class"]),_=t.omit(A,["defaultValue","onUpdate:value","prefixCls"]),j=t.classNames({[`${s.value}-disabled`]:l,[`${s.value}-focused`]:h.value,[`${s.value}-rtl`]:I.value==="rtl"},t.getStatusClassNames(s.value,E.value),!T&&M,x.value),L=t._extends(t._extends(t._extends(t._extends({prefixCls:s.value},_),{disabled:l,direction:I.value,filterOption:g.value,getPopupContainer:v,options:e.loading?[{value:"ANTDV_SEARCHING",disabled:!0,label:n.createVNode(t.Spin,{size:"small"},null)}]:e.options||H(),class:j}),F),{rows:m,onChange:D,onSelect:V,onFocus:N,onBlur:$,ref:y,value:S.value,id:P}),W=n.createVNode(ge,t._objectSpread2(t._objectSpread2({},L),{},{dropdownClassName:x.value}),{notFoundContent:B,option:r.option});return C(T?n.createVNode("div",{class:t.classNames(`${s.value}-affix-wrapper`,t.getStatusClassNames(`${s.value}-affix-wrapper`,E.value,T),M,x.value)},[W,n.createVNode("span",{class:`${s.value}-suffix`},[R])]):W)}}}),K=n.defineComponent(t._extends(t._extends({compatConfig:{MODE:3}},ee),{name:"AMentionsOption",props:Z})),ye=t._extends(z,{Option:K,getMentions:be,install:e=>(e.component(z.name,z),e.component(K.name,K),e)}),Se=n.defineComponent({__name:"Mentions",setup(e){return(i,r)=>(n.openBlock(),n.createBlock(n.unref(ye),n.normalizeProps(n.guardReactiveProps(i.$attrs)),{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(i.$slots,(o,a)=>n.renderSlot(i.$slots,a,{key:a})),128))]),_:3},16))}});exports.default=Se;

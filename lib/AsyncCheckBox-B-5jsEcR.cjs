"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),t=require("./index-D_zVEGCL.cjs"),L=require("./Checkbox-BLfoAHt-.cjs"),F=require("./index-b8D7-BJ5.cjs"),X=()=>({name:String,prefixCls:String,options:t.arrayType([]),disabled:Boolean,id:String}),z=()=>t._extends(t._extends({},X()),{defaultValue:t.arrayType(),value:t.arrayType(),onChange:t.functionType(),"onUpdate:value":t.functionType()}),J=()=>({prefixCls:String,defaultChecked:t.booleanType(),checked:t.booleanType(),disabled:t.booleanType(),isGroup:t.booleanType(),value:t.PropTypes.any,name:String,id:String,indeterminate:t.booleanType(),type:t.stringType("checkbox"),autofocus:t.booleanType(),onChange:t.functionType(),"onUpdate:checked":t.functionType(),onClick:t.functionType(),skipGroup:t.booleanType(!1)}),Q=()=>t._extends(t._extends({},J()),{indeterminate:t.booleanType(!1)}),D=Symbol("CheckboxGroupContext");var B=function(n,x){var l={};for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&x.indexOf(u)<0&&(l[u]=n[u]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,u=Object.getOwnPropertySymbols(n);r<u.length;r++)x.indexOf(u[r])<0&&Object.prototype.propertyIsEnumerable.call(n,u[r])&&(l[u[r]]=n[u[r]]);return l};const _=e.defineComponent({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:Q(),setup(n,x){let{emit:l,attrs:u,slots:r,expose:p}=x;const f=t.useInjectFormItemContext(),C=t.FormItemInputContext.useInject(),{prefixCls:v,direction:i,disabled:k}=t.useConfigInject("checkbox",n),m=t.useInjectDisabled(),[b,y]=F.useStyle(v),c=e.inject(D,void 0),S=Symbol("checkboxUniId"),T=e.computed(()=>(c==null?void 0:c.disabled.value)||k.value);e.watchEffect(()=>{!n.skipGroup&&c&&c.registerValue(S,n.value)}),e.onBeforeUnmount(()=>{c&&c.cancelValue(S)}),e.onMounted(()=>{t.warning(!!(n.checked!==void 0||c||n.value===void 0),"Checkbox","`value` is not validate prop, do you mean `checked`?")});const j=a=>{const d=a.target.checked;l("update:checked",d),l("change",a),f.onFieldChange()},I=e.ref();return p({focus:()=>{var a;(a=I.value)===null||a===void 0||a.focus()},blur:()=>{var a;(a=I.value)===null||a===void 0||a.blur()}}),()=>{var a;const d=t.flattenChildren((a=r.default)===null||a===void 0?void 0:a.call(r)),{indeterminate:s,skipGroup:h,id:M=f.id.value}=n,P=B(n,["indeterminate","skipGroup","id"]),{onMouseenter:A,onMouseleave:w,onInput:Y,class:E,style:U}=u,q=B(u,["onMouseenter","onMouseleave","onInput","class","style"]),g=t._extends(t._extends(t._extends(t._extends({},P),{id:M,prefixCls:v.value}),q),{disabled:T.value});c&&!h?(g.onChange=function(){for(var N=arguments.length,$=new Array(N),V=0;V<N;V++)$[V]=arguments[V];l("change",...$),c.toggleOption({label:d,value:n.value})},g.name=c.name.value,g.checked=c.mergedValue.value.includes(n.value),g.disabled=T.value||m.value,g.indeterminate=s):g.onChange=j;const R=t.classNames({[`${v.value}-wrapper`]:!0,[`${v.value}-rtl`]:i.value==="rtl",[`${v.value}-wrapper-checked`]:g.checked,[`${v.value}-wrapper-disabled`]:g.disabled,[`${v.value}-wrapper-in-form-item`]:C.isFormItemInput},E,y.value),K=t.classNames({[`${v.value}-indeterminate`]:s},y.value),H=s?"mixed":void 0;return b(e.createVNode("label",{class:R,style:U,onMouseenter:A,onMouseleave:w},[e.createVNode(L.VcCheckbox,t._objectSpread2(t._objectSpread2({"aria-checked":H},g),{},{class:K,ref:I}),null),d.length?e.createVNode("span",null,[d]):null]))}}}),O=e.defineComponent({compatConfig:{MODE:3},name:"ACheckboxGroup",inheritAttrs:!1,props:z(),setup(n,x){let{slots:l,attrs:u,emit:r,expose:p}=x;const f=t.useInjectFormItemContext(),{prefixCls:C,direction:v}=t.useConfigInject("checkbox",n),i=e.computed(()=>`${C.value}-group`),[k,m]=F.useStyle(i),b=e.ref((n.value===void 0?n.defaultValue:n.value)||[]);e.watch(()=>n.value,()=>{b.value=n.value||[]});const y=e.computed(()=>n.options.map(o=>typeof o=="string"||typeof o=="number"?{label:o,value:o}:o)),c=e.ref(Symbol()),S=e.ref(new Map),T=o=>{S.value.delete(o),c.value=Symbol()},j=(o,a)=>{S.value.set(o,a),c.value=Symbol()},I=e.ref(new Map);e.watch(c,()=>{const o=new Map;for(const a of S.value.values())o.set(a,!0);I.value=o});const G=o=>{const a=b.value.indexOf(o.value),d=[...b.value];a===-1?d.push(o.value):d.splice(a,1),n.value===void 0&&(b.value=d);const s=d.filter(h=>I.value.has(h)).sort((h,M)=>{const P=y.value.findIndex(w=>w.value===h),A=y.value.findIndex(w=>w.value===M);return P-A});r("update:value",s),r("change",s),f.onFieldChange()};return e.provide(D,{cancelValue:T,registerValue:j,toggleOption:G,mergedValue:b,name:e.computed(()=>n.name),disabled:e.computed(()=>n.disabled)}),p({mergedValue:b}),()=>{var o;const{id:a=f.id.value}=n;let d=null;return y.value&&y.value.length>0&&(d=y.value.map(s=>{var h;return e.createVNode(_,{prefixCls:C.value,key:s.value.toString(),disabled:"disabled"in s?s.disabled:n.disabled,indeterminate:s.indeterminate,value:s.value,checked:b.value.indexOf(s.value)!==-1,onChange:s.onChange,class:`${i.value}-item`},{default:()=>[l.label!==void 0?(h=l.label)===null||h===void 0?void 0:h.call(l,s):s.label]})})),k(e.createVNode("div",t._objectSpread2(t._objectSpread2({},u),{},{class:[i.value,{[`${i.value}-rtl`]:v.value==="rtl"},u.class,m.value],id:a}),[d||((o=l.default)===null||o===void 0?void 0:o.call(l))]))}}});_.Group=O;_.install=function(n){return n.component(_.name,_),n.component(O.name,O),n};const W=e.defineComponent({__name:"AsyncCheckBox",props:{value:{},options:{type:[Array,Function]}},emits:["update:value"],setup(n,{emit:x}){const l=n,u=x,r=e.computed({get(){return l.value},set(i){u("update:value",i)}}),p=e.ref("加载中...."),f=e.ref([]),C=async()=>{p.value="加载中....";try{if(l.options instanceof Function){const i=await l.options();f.value=i}else{if(l.options&&!Array.isArray(l.options)){console.error("options must be an array or a function that returns an array");return}f.value=l.options}f.value.length===0?p.value="暂无数据":p.value=""}catch{p.value="数据加载失败"}r.value=l.value};C();const v=async()=>{await C()};return(i,k)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("span",{onClick:v,style:{cursor:"pointer",color:"hsla(237deg 74% 33% / 61%)"}},e.toDisplayString(f.value.length>0?"":p.value),1),e.createVNode(e.unref(O),e.mergeProps({value:r.value,"onUpdate:value":k[0]||(k[0]=m=>r.value=m)},i.$attrs),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,m=>(e.openBlock(),e.createBlock(e.unref(_),{key:m.value,value:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["value"])]))}});exports.default=W;

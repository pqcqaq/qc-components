"use strict";const r=require("./index-BWWm-k8Z.cjs"),n=require("vue"),X=require("./index-D0cF3jDT.cjs"),H=Symbol("OverflowContextProviderKey"),q=n.defineComponent({compatConfig:{MODE:3},name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup(e,u){let{slots:a}=u;return n.provide(H,n.computed(()=>e.value)),()=>{var t;return(t=a.default)===null||t===void 0?void 0:t.call(a)}}}),de=()=>n.inject(H,n.computed(()=>null));var ce=function(e,u){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)u.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};const N=void 0,K=n.defineComponent({compatConfig:{MODE:3},name:"Item",props:{prefixCls:String,item:r.PropTypes.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:r.PropTypes.any,invalidate:Boolean},setup(e,u){let{slots:a,expose:t}=u;const o=n.computed(()=>e.responsive&&!e.display),p=n.ref();t({itemNodeRef:p});function b(s){e.registerSize(e.itemKey,s)}return n.onUnmounted(()=>{b(null)}),()=>{var s;const{prefixCls:g,invalidate:O,item:v,renderItem:m,responsive:f,registerSize:E,itemKey:x,display:W,order:_,component:F="div"}=e,h=ce(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),V=(s=a.default)===null||s===void 0?void 0:s.call(a),A=m&&v!==N?m(v):V;let S;O||(S={opacity:o.value?0:1,height:o.value?0:N,overflowY:o.value?"hidden":N,order:f?_:N,pointerEvents:o.value?"none":N,position:o.value?"absolute":N});const C={};return o.value&&(C["aria-hidden"]=!0),n.createVNode(X.ResizeObserver,{disabled:!f,onResize:R=>{let{offsetWidth:D}=R;b(D)}},{default:()=>n.createVNode(F,r._objectSpread2(r._objectSpread2(r._objectSpread2({class:r.classNames(!O&&g),style:S},C),h),{},{ref:p}),{default:()=>[A]})})}}});var $=function(e,u){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)u.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};const fe=n.defineComponent({compatConfig:{MODE:3},name:"RawItem",inheritAttrs:!1,props:{component:r.PropTypes.any,title:r.PropTypes.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},role:String,tabindex:Number},setup(e,u){let{slots:a,attrs:t}=u;const o=de();return()=>{var p;if(!o.value){const{component:m="div"}=e,f=$(e,["component"]);return n.createVNode(m,r._objectSpread2(r._objectSpread2({},f),t),{default:()=>[(p=a.default)===null||p===void 0?void 0:p.call(a)]})}const b=o.value,{className:s}=b,g=$(b,["className"]),{class:O}=t,v=$(t,["class"]);return n.createVNode(q,{value:null},{default:()=>[n.createVNode(K,r._objectSpread2(r._objectSpread2(r._objectSpread2({class:r.classNames(s,O)},g),v),e),a)]})}}});var ve=function(e,u){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)u.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};const Y="responsive",J="invalidate";function me(e){return`+ ${e.length} ...`}const ye=()=>({id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:r.PropTypes.any,component:String,itemComponent:r.PropTypes.any,onVisibleChange:Function,ssr:String,onMousedown:Function}),M=n.defineComponent({name:"Overflow",inheritAttrs:!1,props:ye(),emits:["visibleChange"],setup(e,u){let{attrs:a,emit:t,slots:o}=u;const p=n.computed(()=>e.ssr==="full"),b=n.shallowRef(null),s=n.computed(()=>b.value||0),g=n.shallowRef(new Map),O=n.shallowRef(0),v=n.shallowRef(0),m=n.shallowRef(0),f=n.shallowRef(null),E=n.shallowRef(null),x=n.computed(()=>E.value===null&&p.value?Number.MAX_SAFE_INTEGER:E.value||0),W=n.shallowRef(!1),_=n.computed(()=>`${e.prefixCls}-item`),F=n.computed(()=>Math.max(O.value,v.value)),h=n.computed(()=>!!(e.data.length&&e.maxCount===Y)),V=n.computed(()=>e.maxCount===J),A=n.computed(()=>h.value||typeof e.maxCount=="number"&&e.data.length>e.maxCount),S=n.computed(()=>{let l=e.data;return h.value?b.value===null&&p.value?l=e.data:l=e.data.slice(0,Math.min(e.data.length,s.value/e.itemWidth)):typeof e.maxCount=="number"&&(l=e.data.slice(0,e.maxCount)),l}),C=n.computed(()=>h.value?e.data.slice(x.value+1):e.data.slice(S.value.length)),R=(l,i)=>{var d;return typeof e.itemKey=="function"?e.itemKey(l):(d=e.itemKey&&(l==null?void 0:l[e.itemKey]))!==null&&d!==void 0?d:i},D=n.computed(()=>e.renderItem||(l=>l)),z=(l,i)=>{E.value=l,i||(W.value=l<e.data.length-1,t("visibleChange",l))},Q=(l,i)=>{b.value=i.clientWidth},B=(l,i)=>{const d=new Map(g.value);i===null?d.delete(l):d.set(l,i),g.value=d},Z=(l,i)=>{O.value=v.value,v.value=i},ee=(l,i)=>{m.value=i},T=l=>g.value.get(R(S.value[l],l));return n.watch([s,g,v,m,()=>e.itemKey,S],()=>{if(s.value&&F.value&&S.value){let l=m.value;const i=S.value.length,d=i-1;if(!i){z(0),f.value=null;return}for(let y=0;y<i;y+=1){const I=T(y);if(I===void 0){z(y-1,!0);break}if(l+=I,d===0&&l<=s.value||y===d-1&&l+T(d)<=s.value){z(d),f.value=null;break}else if(l+F.value>s.value){z(y-1),f.value=l-I-m.value+v.value;break}}e.suffix&&T(0)+m.value>s.value&&(f.value=null)}}),()=>{const l=W.value&&!!C.value.length,{itemComponent:i,renderRawItem:d,renderRawRest:y,renderRest:I,prefixCls:te="rc-overflow",suffix:G,component:ne="div",id:oe,onMousedown:le}=e,{class:re,style:ae}=a,ie=ve(a,["class","style"]);let L={};f.value!==null&&h.value&&(L={position:"absolute",left:`${f.value}px`,top:0});const j={prefixCls:_.value,responsive:h.value,component:i,invalidate:V.value},ue=d?(c,w)=>{const P=R(c,w);return n.createVNode(q,{key:P,value:r._extends(r._extends({},j),{order:w,item:c,itemKey:P,registerSize:B,display:w<=x.value})},{default:()=>[d(c,w)]})}:(c,w)=>{const P=R(c,w);return n.createVNode(K,r._objectSpread2(r._objectSpread2({},j),{},{order:w,key:P,item:c,renderItem:D.value,itemKey:P,registerSize:B,display:w<=x.value}),null)};let k=()=>null;const U={order:l?x.value:Number.MAX_SAFE_INTEGER,className:`${_.value} ${_.value}-rest`,registerSize:Z,display:l};if(y)y&&(k=()=>n.createVNode(q,{value:r._extends(r._extends({},j),U)},{default:()=>[y(C.value)]}));else{const c=I||me;k=()=>n.createVNode(K,r._objectSpread2(r._objectSpread2({},j),U),{default:()=>typeof c=="function"?c(C.value):c})}const se=()=>{var c;return n.createVNode(ne,r._objectSpread2({id:oe,class:r.classNames(!V.value&&te,re),style:ae,onMousedown:le},ie),{default:()=>[S.value.map(ue),A.value?k():null,G&&n.createVNode(K,r._objectSpread2(r._objectSpread2({},j),{},{order:x.value,class:`${_.value}-suffix`,registerSize:ee,display:!0,style:L}),{default:()=>G}),(c=o.default)===null||c===void 0?void 0:c.call(o)]})};return n.createVNode(X.ResizeObserver,{disabled:!h.value,onResize:Q},{default:se})}}});M.Item=fe;M.RESPONSIVE=Y;M.INVALIDATE=J;exports.Overflow=M;

{"version":3,"file":"AutoCompleteInput-Cdt4S7d2.js","sources":["../../../../node_modules/.pnpm/ant-design-vue@4.2.3_vue@3.4.27_typescript@5.4.5_/node_modules/ant-design-vue/es/auto-complete/Option.js","../../../../node_modules/.pnpm/ant-design-vue@4.2.3_vue@3.4.27_typescript@5.4.5_/node_modules/ant-design-vue/es/auto-complete/OptGroup.js","../../../../node_modules/.pnpm/ant-design-vue@4.2.3_vue@3.4.27_typescript@5.4.5_/node_modules/ant-design-vue/es/auto-complete/index.js","../../../../qc-components/dynamic-form/components/AutoCompleteInput.vue"],"sourcesContent":["const Option = () => null;\nOption.isSelectOption = true;\nOption.displayName = 'AAutoCompleteOption';\nexport default Option;","const OptGroup = () => null;\nOptGroup.isSelectOptGroup = true;\nOptGroup.displayName = 'AAutoCompleteOptGroup';\nexport default OptGroup;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\nimport { defineComponent, ref } from 'vue';\nimport Select, { selectProps } from '../select';\nimport { isValidElement, flattenChildren } from '../_util/props-util';\nimport warning from '../_util/warning';\nimport Option from './Option';\nimport OptGroup from './OptGroup';\nimport omit from '../_util/omit';\nimport useConfigInject from '../config-provider/hooks/useConfigInject';\nfunction isSelectOptionOrSelectOptGroup(child) {\n  var _a, _b;\n  return ((_a = child === null || child === void 0 ? void 0 : child.type) === null || _a === void 0 ? void 0 : _a.isSelectOption) || ((_b = child === null || child === void 0 ? void 0 : child.type) === null || _b === void 0 ? void 0 : _b.isSelectOptGroup);\n}\nexport const autoCompleteProps = () => _extends(_extends({}, omit(selectProps(), ['loading', 'mode', 'optionLabelProp', 'labelInValue'])), {\n  dataSource: Array,\n  dropdownMenuStyle: {\n    type: Object,\n    default: undefined\n  },\n  // optionLabelProp: String,\n  dropdownMatchSelectWidth: {\n    type: [Number, Boolean],\n    default: true\n  },\n  prefixCls: String,\n  showSearch: {\n    type: Boolean,\n    default: undefined\n  },\n  transitionName: String,\n  choiceTransitionName: {\n    type: String,\n    default: 'zoom'\n  },\n  autofocus: {\n    type: Boolean,\n    default: undefined\n  },\n  backfill: {\n    type: Boolean,\n    default: undefined\n  },\n  // optionLabelProp: PropTypes.string.def('children'),\n  filterOption: {\n    type: [Boolean, Function],\n    default: false\n  },\n  defaultActiveFirstOption: {\n    type: Boolean,\n    default: true\n  },\n  status: String\n});\nexport const AutoCompleteOption = Option;\nexport const AutoCompleteOptGroup = OptGroup;\nconst AutoComplete = defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'AAutoComplete',\n  inheritAttrs: false,\n  props: autoCompleteProps(),\n  // emits: ['change', 'select', 'focus', 'blur'],\n  slots: Object,\n  setup(props, _ref) {\n    let {\n      slots,\n      attrs,\n      expose\n    } = _ref;\n    warning(!('dataSource' in slots), 'AutoComplete', '`dataSource` slot is deprecated, please use props `options` instead.');\n    warning(!('options' in slots), 'AutoComplete', '`options` slot is deprecated, please use props `options` instead.');\n    warning(!props.dropdownClassName, 'AutoComplete', '`dropdownClassName` is deprecated, please use `popupClassName` instead.');\n    const selectRef = ref();\n    const getInputElement = () => {\n      var _a;\n      const children = flattenChildren((_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots));\n      const element = children.length ? children[0] : undefined;\n      return element;\n    };\n    const focus = () => {\n      var _a;\n      (_a = selectRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n    };\n    const blur = () => {\n      var _a;\n      (_a = selectRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n    };\n    expose({\n      focus,\n      blur\n    });\n    const {\n      prefixCls\n    } = useConfigInject('select', props);\n    return () => {\n      var _a, _b, _c;\n      const {\n        size,\n        dataSource,\n        notFoundContent = (_a = slots.notFoundContent) === null || _a === void 0 ? void 0 : _a.call(slots)\n      } = props;\n      let optionChildren;\n      const {\n        class: className\n      } = attrs;\n      const cls = {\n        [className]: !!className,\n        [`${prefixCls.value}-lg`]: size === 'large',\n        [`${prefixCls.value}-sm`]: size === 'small',\n        [`${prefixCls.value}-show-search`]: true,\n        [`${prefixCls.value}-auto-complete`]: true\n      };\n      if (props.options === undefined) {\n        const childArray = ((_b = slots.dataSource) === null || _b === void 0 ? void 0 : _b.call(slots)) || ((_c = slots.options) === null || _c === void 0 ? void 0 : _c.call(slots)) || [];\n        if (childArray.length && isSelectOptionOrSelectOptGroup(childArray[0])) {\n          optionChildren = childArray;\n        } else {\n          optionChildren = dataSource ? dataSource.map(item => {\n            if (isValidElement(item)) {\n              return item;\n            }\n            switch (typeof item) {\n              case 'string':\n                return _createVNode(Option, {\n                  \"key\": item,\n                  \"value\": item\n                }, {\n                  default: () => [item]\n                });\n              case 'object':\n                return _createVNode(Option, {\n                  \"key\": item.value,\n                  \"value\": item.value\n                }, {\n                  default: () => [item.text]\n                });\n              default:\n                throw new Error('AutoComplete[dataSource] only supports type `string[] | Object[]`.');\n            }\n          }) : [];\n        }\n      }\n      const selectProps = omit(_extends(_extends(_extends({}, props), attrs), {\n        mode: Select.SECRET_COMBOBOX_MODE_DO_NOT_USE,\n        // optionLabelProp,\n        getInputElement,\n        notFoundContent,\n        // placeholder: '',\n        class: cls,\n        popupClassName: props.popupClassName || props.dropdownClassName,\n        ref: selectRef\n      }), ['dataSource', 'loading']);\n      return _createVNode(Select, selectProps, _objectSpread({\n        default: () => [optionChildren]\n      }, omit(slots, ['default', 'dataSource', 'options'])));\n    };\n  }\n});\n/* istanbul ignore next */\nexport default _extends(AutoComplete, {\n  Option,\n  OptGroup,\n  install(app) {\n    app.component(AutoComplete.name, AutoComplete);\n    app.component(Option.displayName, Option);\n    app.component(OptGroup.displayName, OptGroup);\n    return app;\n  }\n});","<template>\n\t<a-auto-complete\n\t\tv-model:value=\"alterData\"\n\t\t:placeholder=\"\n\t\t\tplaceholder\n\t\t\t\t? placeholder\n\t\t\t\t: `输入${title}内容${\n\t\t\t\t\t\tenableSplit ? '（以' + splitWord + '分割）' : ''\n\t\t\t\t  } 或选择已有${title}`\n\t\t\"\n\t\t@select=\"handleSelect\"\n\t\t:options=\"promptList\"\n\t\t@search=\"onSearch\"\n\t\tv-bind=\"{\n\t\t\t...$attrs,\n\t\t\tstyle: props.style,\n\t\t}\"\n\t/>\n</template>\n\n<script setup lang=\"ts\">\nimport { CSSProperties, computed, onMounted, ref } from \"vue\";\n\ntype AutoInputList = {\n\tlabel?: string;\n\tvalue: string;\n};\n\nconst props = defineProps<{\n\ttitle?: string;\n\tvalue: string | undefined;\n\tfetchList:\n\t\t| (() => Promise<AutoInputList[]> | AutoInputList[])\n\t\t| AutoInputList[]\n\t\t| undefined;\n\tstyle?: CSSProperties;\n\tenableSplit?: boolean;\n\tsplitWord?: string;\n\tplaceholder?: string;\n}>();\n\nconst emit = defineEmits([\"update:value\"]);\nconst list = ref<AutoInputList[]>([]);\nconst promptList = ref<AutoInputList[]>([]);\n\nonMounted(async () => {\n\tif (!props.fetchList) return;\n\tif (props.fetchList instanceof Function) {\n\t\tconst newList = await props.fetchList();\n\t\tlist.value.push(...newList);\n\t} else {\n\t\tlist.value.push(...props.fetchList);\n\t}\n\tpromptList.value = list.value;\n});\n\nconst alterData = computed({\n\tget() {\n\t\treturn props.value;\n\t},\n\tset(value) {\n\t\temit(\"update:value\", value);\n\t},\n});\n\nconst finalSplitWord = computed(() => props.splitWord || \",\");\nconst title = computed(() => props.title || \"\");\nconst enableSplit = computed(() => !!props.enableSplit);\n\nconst createFilter = (arr: { value: string }[], key: string) => {\n\tconst finalKey = enableSplit.value\n\t\t? key.split(finalSplitWord.value).pop()?.trim()\n\t\t: key;\n\treturn arr.filter(\n\t\t(item) => item.value.includes(finalKey || \"\") && item.value !== finalKey\n\t);\n};\n\nconst handleSelect = (select: string) => {\n\tif (enableSplit.value) {\n\t\tconst dataWithoutFinalKey = alterData.value\n\t\t\t? alterData.value.endsWith(finalSplitWord.value)\n\t\t\t\t? alterData.value.split(finalSplitWord.value).slice(0, -1)\n\t\t\t\t: alterData.value.split(finalSplitWord.value)\n\t\t\t: [];\n\t\tconst newValue = alterData.value\n\t\t\t? [...dataWithoutFinalKey, select].join(finalSplitWord.value)\n\t\t\t: select;\n\t\talterData.value = newValue;\n\t} else {\n\t\talterData.value = select;\n\t}\n};\n\nconst onSearch = (searchText: string) => {\n\tpromptList.value = createFilter(list.value, searchText);\n};\n</script>\n"],"names":["Option","OptGroup","isSelectOptionOrSelectOptGroup","child","_a","_b","autoCompleteProps","_extends","omit","selectProps","AutoComplete","defineComponent","props","_ref","slots","attrs","expose","warning","selectRef","ref","getInputElement","children","flattenChildren","prefixCls","useConfigInject","_c","size","dataSource","notFoundContent","optionChildren","className","cls","childArray","item","isValidElement","_createVNode","Select","_objectSpread","__unplugin_components_0","app","__props","emit","__emit","list","promptList","onMounted","newList","alterData","computed","value","finalSplitWord","title","enableSplit","createFilter","arr","key","finalKey","handleSelect","select","dataWithoutFinalKey","newValue","onSearch","searchText"],"mappings":"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","x_google_ignoreList":[0,1,2]}
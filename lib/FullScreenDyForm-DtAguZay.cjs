"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),T=require("./index-BWWm-k8Z.cjs"),O=require("./index-Dd7AM4n6.cjs"),_={class:"fullscreen"},P={key:0,class:"btns"},V=e.defineComponent({__name:"FullScreenDyForm",props:{schema:{},showBtns:{type:[Object,Boolean]},init:{},onCancel:{type:Function},allowDirectClose:{type:Boolean},onSubmit:{type:Function},style:{},draggable:{type:Boolean},title:{},fadeInOut:{type:Boolean},fadeTime:{},mousePosition:{},goClose:{},customBtns:{},showCloseBtn:{type:Boolean}},setup(B){const x=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("./index-BWWm-k8Z.cjs")).then(o=>o.DynamicForm$1)),f=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("./index-BWWm-k8Z.cjs")).then(o=>o.index$1)),t=B,r=e.ref({}),u=e.ref(!1),m=e.ref(t.schema);e.onMounted(()=>{Object.keys(t.init).length>0&&(r.value={...t.init}),t.title&&(m.value.title=t.title)});const C=()=>{t.allowDirectClose?t.onCancel():O.Modal.confirm({title:"确认关闭",content:"关闭后将不会保存当前数据，是否继续？",onOk:()=>{t.onCancel()},okText:"确认关闭",okType:"primary",okButtonProps:{danger:!0},cancelText:"返回",zIndex:1e4,centered:!0})},k=()=>{u.value=!0},w=()=>{u.value=!1},b={mounted(o){if(!t.draggable)return;let n=o;const s=l=>{const c={x:n.getBoundingClientRect().x,y:n.getBoundingClientRect().y},a={x:l.clientX,y:l.clientY},p={width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height},v=h=>{n.style.cursor="move";const g={x:h.clientX-a.x,y:h.clientY-a.y},i={x:c.x+g.x,y:c.y+g.y};i.x<15||i.y<15||i.x+p.width>window.innerWidth-30||i.y+p.height>window.innerHeight-15||(n.style.left=i.x+"px",n.style.top=i.y+"px")};document.addEventListener("mousemove",v),document.addEventListener("mouseup",()=>{n.style.cursor="default",document.removeEventListener("mousemove",v)})};n.style.position="absolute",n.addEventListener("mousedown",s)},unmounted(o){if(!t.draggable)return;o.removeEventListener("mousedown",()=>{})}};let d=null;const E={mounted(o,n){d=o;const s=n.value;s.enable&&(o.style.opacity="0",setTimeout(()=>{o.style.transition="opacity "+s.fadeTime+"ms ease",o.style.opacity="1"},10))}};let y=null;const S={mounted(o,n){y=o;const s=n.value;if(!s.enable)return;if(o.style.scale="0.2",!t.mousePosition){o.style.transformOrigin="center";return}const l=o.getBoundingClientRect(),c=t.mousePosition.x-l.left,a=t.mousePosition.y-l.top;o.style.transformOrigin=`${c}px ${a}px`,setTimeout(()=>{o.style.transition="scale "+s.fadeTime+"ms ease",o.style.scale="1"},10)}};return e.watch(()=>t.goClose.value,o=>{o&&(d&&(d.style.opacity="0"),y&&(y.style.scale="0.2"))}),(o,n)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",_,[e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:"full-form",style:e.normalizeStyle({...t.style})},[e.createVNode(e.unref(x),{schema:m.value,modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=s=>r.value=s),"show-btns":t.showBtns,class:"form","on-before-submit":k,"on-submit":t.onSubmit,"on-after-submit":w},null,8,["schema","modelValue","show-btns","on-submit"]),t.showCloseBtn?(e.openBlock(),e.createElementBlock("div",P,[e.createVNode(e.unref(f),{shape:"circle",type:"primary",danger:"",onClick:C,disabled:u.value},{default:e.withCtx(()=>[e.createVNode(e.unref(T.CloseOutlined))]),_:1},8,["disabled"])])):e.createCommentVNode("",!0),t.customBtns&&t.customBtns.length>0?(e.openBlock(),e.createElementBlock("div",{key:1,class:"custombtns",style:e.normalizeStyle({display:"flex",justifyContent:"center",marginTop:"20px",gap:"20px",...m.value.customBtnsStyle})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.customBtns,s=>(e.openBlock(),e.createElementBlock("div",{key:s.text,style:e.normalizeStyle({display:"inline",justifyContent:"center",...s.outterStyle})},[e.createVNode(e.unref(f),e.mergeProps({onClick:()=>{var l;(l=s.onClick)==null||l.call(s,r.value,t.onCancel)},ref_for:!0},s.props,{style:{...s.style}}),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.text),1)]),_:2},1040,["onClick","style"])],4))),128))],4)):e.createCommentVNode("",!0)],4)),[[b],[S,{fadeTime:t.fadeTime||150,enable:t.fadeInOut||!0}]])])),[[E,{fadeTime:t.fadeTime||150,enable:t.fadeInOut||!0}]])}});exports.default=V;

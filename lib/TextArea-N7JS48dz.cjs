"use strict";const t=require("./index-C0gasYeq.cjs"),a=require("vue"),M=require("./statusUtils-CapwyvCy.cjs"),se=require("./index-DqRKarPw.cjs"),de=require("./BaseInput-D7UBBdfj.cjs"),ce=require("./index-DKN71Oy_.cjs"),N=e=>e!=null&&(Array.isArray(e)?t.filterEmpty(e).length:!0);function fe(e){return N(e.prefix)||N(e.suffix)||N(e.allowClear)}function pe(e){return N(e.addonBefore)||N(e.addonAfter)}function X(e){return typeof e>"u"||e===null?"":String(e)}function O(e,f,o,s){if(!o)return;const r=f;if(f.type==="click"){Object.defineProperty(r,"target",{writable:!0}),Object.defineProperty(r,"currentTarget",{writable:!0});const m=e.cloneNode(!0);r.target=m,r.currentTarget=m,m.value="",o(r);return}if(s!==void 0){Object.defineProperty(r,"target",{writable:!0}),Object.defineProperty(r,"currentTarget",{writable:!0}),r.target=e,r.currentTarget=e,e.value=s,o(r);return}o(r)}function J(e,f){if(!e)return;e.focus(f);const{cursor:o}=f||{};if(o){const s=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(s,s);break;default:e.setSelectionRange(0,s)}}}const ve=()=>({addonBefore:t.PropTypes.any,addonAfter:t.PropTypes.any,prefix:t.PropTypes.any,suffix:t.PropTypes.any,clearIcon:t.PropTypes.any,affixWrapperClassName:String,groupClassName:String,wrapperClassName:String,inputClassName:String,allowClear:{type:Boolean,default:void 0}}),Q=()=>t._extends(t._extends({},ve()),{value:{type:[String,Number,Symbol],default:void 0},defaultValue:{type:[String,Number,Symbol],default:void 0},inputElement:t.PropTypes.any,prefixCls:String,disabled:{type:Boolean,default:void 0},focused:{type:Boolean,default:void 0},triggerFocus:Function,readonly:{type:Boolean,default:void 0},handleReset:Function,hidden:{type:Boolean,default:void 0}}),ee=()=>t._extends(t._extends({},Q()),{id:String,placeholder:{type:[String,Number]},autocomplete:String,type:t.stringType("text"),name:String,size:{type:String},autofocus:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!0},maxlength:Number,loading:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},showCount:{type:[Boolean,Object]},htmlSize:Number,onPressEnter:Function,onKeydown:Function,onKeyup:Function,onFocus:Function,onBlur:Function,onChange:Function,onInput:Function,"onUpdate:value":Function,onCompositionstart:Function,onCompositionend:Function,valueModifiers:Object,hidden:{type:Boolean,default:void 0},status:String}),te=()=>t.omit(ee(),["wrapperClassName","groupClassName","inputClassName","affixWrapperClassName"]),ne=()=>t._extends(t._extends({},t.omit(te(),["prefix","addonBefore","addonAfter","suffix"])),{rows:Number,autosize:{type:[Boolean,Object],default:void 0},autoSize:{type:[Boolean,Object],default:void 0},onResize:{type:Function},onCompositionstart:t.eventType(),onCompositionend:t.eventType(),valueModifiers:Object}),Z=e=>e!=null&&(Array.isArray(e)?t.filterEmpty(e).length:!0);function ge(e){return Z(e.addonBefore)||Z(e.addonAfter)}const me=["text","input"],he=a.defineComponent({compatConfig:{MODE:3},name:"ClearableLabeledInput",inheritAttrs:!1,props:{prefixCls:String,inputType:t.PropTypes.oneOf(t.tuple("text","input")),value:t.anyType(),defaultValue:t.anyType(),allowClear:{type:Boolean,default:void 0},element:t.anyType(),handleReset:Function,disabled:{type:Boolean,default:void 0},direction:{type:String},size:{type:String},suffix:t.anyType(),prefix:t.anyType(),addonBefore:t.anyType(),addonAfter:t.anyType(),readonly:{type:Boolean,default:void 0},focused:{type:Boolean,default:void 0},bordered:{type:Boolean,default:!0},triggerFocus:{type:Function},hidden:Boolean,status:String,hashId:String},setup(e,f){let{slots:o,attrs:s}=f;const r=t.FormItemInputContext.useInject(),m=d=>{const{value:c,disabled:l,readonly:p,handleReset:u,suffix:x=o.suffix}=e,y=!l&&!p&&c,w=`${d}-clear-icon`;return a.createVNode(t.CloseCircleFilled,{onClick:u,onMousedown:z=>z.preventDefault(),class:t.classNames({[`${w}-hidden`]:!y,[`${w}-has-suffix`]:!!x},w),role:"button"},null)},h=(d,c)=>{const{value:l,allowClear:p,direction:u,bordered:x,hidden:y,status:w,addonAfter:z=o.addonAfter,addonBefore:_=o.addonBefore,hashId:C}=e,{status:I,hasFeedback:A}=r;if(!p)return t.cloneElement(c,{value:l,disabled:e.disabled});const F=t.classNames(`${d}-affix-wrapper`,`${d}-affix-wrapper-textarea-with-clear-btn`,M.getStatusClassNames(`${d}-affix-wrapper`,M.getMergedStatus(I,w),A),{[`${d}-affix-wrapper-rtl`]:u==="rtl",[`${d}-affix-wrapper-borderless`]:!x,[`${s.class}`]:!ge({addonAfter:z,addonBefore:_})&&s.class},C);return a.createVNode("span",{class:F,style:s.style,hidden:y},[t.cloneElement(c,{style:null,value:l,disabled:e.disabled}),m(d)])};return()=>{var d;const{prefixCls:c,inputType:l,element:p=(d=o.element)===null||d===void 0?void 0:d.call(o)}=e;return l===me[0]?h(c,p):null}}}),xe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],L={};let S;function be(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(f&&L[o])return L[o];const s=window.getComputedStyle(e),r=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),m=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),h=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),c={sizingStyle:ye.map(l=>`${l}:${s.getPropertyValue(l)}`).join(";"),paddingSize:m,borderSize:h,boxSizing:r};return f&&o&&(L[o]=c),c}function Se(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;S||(S=document.createElement("textarea"),S.setAttribute("tab-index","-1"),S.setAttribute("aria-hidden","true"),document.body.appendChild(S)),e.getAttribute("wrap")?S.setAttribute("wrap",e.getAttribute("wrap")):S.removeAttribute("wrap");const{paddingSize:r,borderSize:m,boxSizing:h,sizingStyle:d}=be(e,f);S.setAttribute("style",`${d};${xe}`),S.value=e.value||e.placeholder||"";let c,l,p,u=S.scrollHeight;if(h==="border-box"?u+=m:h==="content-box"&&(u-=r),o!==null||s!==null){S.value=" ";const y=S.scrollHeight-r;o!==null&&(c=y*o,h==="border-box"&&(c=c+r+m),u=Math.max(c,u)),s!==null&&(l=y*s,h==="border-box"&&(l=l+r+m),p=u>l?"":"hidden",u=Math.min(l,u))}const x={height:`${u}px`,overflowY:p,resize:"none"};return c&&(x.minHeight=`${c}px`),l&&(x.maxHeight=`${l}px`),x}const q=0,U=1,K=2,we=a.defineComponent({compatConfig:{MODE:3},name:"ResizableTextArea",inheritAttrs:!1,props:ne(),setup(e,f){let{attrs:o,emit:s,expose:r}=f,m,h;const d=a.ref(),c=a.ref({}),l=a.ref(K);a.onBeforeUnmount(()=>{t.wrapperRaf.cancel(m),t.wrapperRaf.cancel(h)});const p=()=>{try{if(d.value&&document.activeElement===d.value.input){const v=d.value.getSelectionStart(),P=d.value.getSelectionEnd(),E=d.value.getScrollTop();d.value.setSelectionRange(v,P),d.value.setScrollTop(E)}}catch{}},u=a.ref(),x=a.ref();a.watchEffect(()=>{const v=e.autoSize||e.autosize;v?(u.value=v.minRows,x.value=v.maxRows):(u.value=void 0,x.value=void 0)});const y=a.computed(()=>!!(e.autoSize||e.autosize)),w=()=>{l.value=q};a.watch([()=>e.value,u,x,y],()=>{y.value&&w()},{immediate:!0});const z=a.ref();a.watch([l,d],()=>{if(d.value)if(l.value===q)l.value=U;else if(l.value===U){const v=Se(d.value.input,!1,u.value,x.value);l.value=K,z.value=v}else p()},{immediate:!0,flush:"post"});const _=a.getCurrentInstance(),C=a.ref(),I=()=>{t.wrapperRaf.cancel(C.value)},A=v=>{l.value===K&&(s("resize",v),y.value&&(I(),C.value=t.wrapperRaf(()=>{w()})))};a.onBeforeUnmount(()=>{I()}),r({resizeTextarea:()=>{w()},textArea:a.computed(()=>{var v;return(v=d.value)===null||v===void 0?void 0:v.input}),instance:_}),t.warning(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");const B=()=>{const{prefixCls:v,disabled:P}=e,E=t.omit(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","maxlength","valueModifiers"]),V=t.classNames(v,o.class,{[`${v}-disabled`]:P}),k=y.value?z.value:null,$=[o.style,c.value,k],R=t._extends(t._extends(t._extends({},E),o),{style:$,class:V});return(l.value===q||l.value===U)&&$.push({overflowX:"hidden",overflowY:"hidden"}),R.autofocus||delete R.autofocus,R.rows===0&&delete R.rows,a.createVNode(se.ResizeObserver,{onResize:A,disabled:!y.value},{default:()=>[a.createVNode(de.BaseInput,t._objectSpread2(t._objectSpread2({},R),{},{ref:d,tag:"textarea"}),null)]})};return()=>B()}});function ae(e,f){return[...e||""].slice(0,f).join("")}function G(e,f,o,s){let r=o;return e?r=ae(o,s):[...f||""].length<o.length&&[...o||""].length>s&&(r=f),r}const Ce=a.defineComponent({compatConfig:{MODE:3},name:"ATextarea",inheritAttrs:!1,props:ne(),setup(e,f){let{attrs:o,expose:s,emit:r}=f;const m=t.useInjectFormItemContext(),h=t.FormItemInputContext.useInject(),d=a.computed(()=>M.getMergedStatus(h.status,e.status)),c=a.shallowRef(e.value===void 0?e.defaultValue:e.value),l=a.shallowRef(),p=a.shallowRef(""),{prefixCls:u,size:x,direction:y}=t.useConfigInject("input",e),[w,z]=ce.useStyle(u),_=t.useInjectDisabled(),C=a.computed(()=>e.showCount===""||e.showCount||!1),I=a.computed(()=>Number(e.maxlength)>0),A=a.shallowRef(!1),F=a.shallowRef(),B=a.shallowRef(0),v=n=>{A.value=!0,F.value=p.value,B.value=n.currentTarget.selectionStart,r("compositionstart",n)},P=n=>{var i;A.value=!1;let g=n.currentTarget.value;if(I.value){const T=B.value>=e.maxlength+1||B.value===((i=F.value)===null||i===void 0?void 0:i.length);g=G(T,F.value,g,e.maxlength)}g!==p.value&&($(g),O(n.currentTarget,n,D,g)),r("compositionend",n)},E=a.getCurrentInstance();a.watch(()=>e.value,()=>{var n;"value"in E.vnode.props,c.value=(n=e.value)!==null&&n!==void 0?n:""});const V=n=>{var i;J((i=l.value)===null||i===void 0?void 0:i.textArea,n)},k=()=>{var n,i;(i=(n=l.value)===null||n===void 0?void 0:n.textArea)===null||i===void 0||i.blur()},$=(n,i)=>{c.value!==n&&(e.value===void 0?c.value=n:a.nextTick(()=>{var g,T,b;l.value.textArea.value!==p.value&&((b=(g=l.value)===null||g===void 0?void 0:(T=g.instance).update)===null||b===void 0||b.call(T))}),a.nextTick(()=>{i&&i()}))},R=n=>{n.keyCode===13&&r("pressEnter",n),r("keydown",n)},oe=n=>{const{onBlur:i}=e;i==null||i(n),m.onFieldBlur()},D=n=>{r("update:value",n.target.value),r("change",n),r("input",n),m.onFieldChange()},le=n=>{O(l.value.textArea,n,D),$("",()=>{V()})},W=n=>{let i=n.target.value;if(c.value!==i){if(I.value){const g=n.target,T=g.selectionStart>=e.maxlength+1||g.selectionStart===i.length||!g.selectionStart;i=G(T,p.value,i,e.maxlength)}O(n.currentTarget,n,D,i),$(i)}},re=()=>{var n,i;const{class:g}=o,{bordered:T=!0}=e,b=t._extends(t._extends(t._extends({},t.omit(e,["allowClear"])),o),{class:[{[`${u.value}-borderless`]:!T,[`${g}`]:g&&!C.value,[`${u.value}-sm`]:x.value==="small",[`${u.value}-lg`]:x.value==="large"},M.getStatusClassNames(u.value,d.value),z.value],disabled:_.value,showCount:null,prefixCls:u.value,onInput:W,onChange:W,onBlur:oe,onKeydown:R,onCompositionstart:v,onCompositionend:P});return!((n=e.valueModifiers)===null||n===void 0)&&n.lazy&&delete b.onInput,a.createVNode(we,t._objectSpread2(t._objectSpread2({},b),{},{id:(i=b==null?void 0:b.id)!==null&&i!==void 0?i:m.id.value,ref:l,maxlength:e.maxlength,lazy:e.lazy}),null)};return s({focus:V,blur:k,resizableTextArea:l}),a.watchEffect(()=>{let n=X(c.value);!A.value&&I.value&&(e.value===null||e.value===void 0)&&(n=ae(n,e.maxlength)),p.value=n}),()=>{var n;const{maxlength:i,bordered:g=!0,hidden:T}=e,{style:b,class:ie}=o,ue=t._extends(t._extends(t._extends({},e),o),{prefixCls:u.value,inputType:"text",handleReset:le,direction:y.value,bordered:g,style:C.value?void 0:b,hashId:z.value,disabled:(n=e.disabled)!==null&&n!==void 0?n:_.value});let H=a.createVNode(he,t._objectSpread2(t._objectSpread2({},ue),{},{value:p.value,status:e.status}),{element:re});if(C.value||h.hasFeedback){const Y=[...p.value].length;let j="";typeof C.value=="object"?j=C.value.formatter({value:p.value,count:Y,maxlength:i}):j=`${Y}${I.value?` / ${i}`:""}`,H=a.createVNode("div",{hidden:T,class:t.classNames(`${u.value}-textarea`,{[`${u.value}-textarea-rtl`]:y.value==="rtl",[`${u.value}-textarea-show-count`]:C.value,[`${u.value}-textarea-in-form-item`]:h.isFormItemInput},`${u.value}-textarea-show-count`,ie,z.value),style:b,"data-count":typeof j!="object"?j:void 0},[H,h.hasFeedback&&a.createVNode("span",{class:`${u.value}-textarea-suffix`},[h.feedbackIcon])])}return w(H)}}});exports.ATextarea=Ce;exports.baseInputProps=Q;exports.fixControlledValue=X;exports.hasAddon=pe;exports.hasPrefixSuffix=fe;exports.inputProps=ee;exports.inputProps$1=te;exports.resolveOnChange=O;exports.triggerFocus=J;

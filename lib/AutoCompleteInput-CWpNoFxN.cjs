"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue"),n=require("./index-nNpR0eDD.cjs"),A=require("./index-BdHUk3t1.cjs"),m=()=>null;m.isSelectOption=!0;m.displayName="AAutoCompleteOption";const h=()=>null;h.isSelectOptGroup=!0;h.displayName="AAutoCompleteOptGroup";function x(t){var v,e;return((v=t==null?void 0:t.type)===null||v===void 0?void 0:v.isSelectOption)||((e=t==null?void 0:t.type)===null||e===void 0?void 0:e.isSelectOptGroup)}const $=()=>n._extends(n._extends({},n.omit(A.selectProps(),["loading","mode","optionLabelProp","labelInValue"])),{dataSource:Array,dropdownMenuStyle:{type:Object,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},prefixCls:String,showSearch:{type:Boolean,default:void 0},transitionName:String,choiceTransitionName:{type:String,default:"zoom"},autofocus:{type:Boolean,default:void 0},backfill:{type:Boolean,default:void 0},filterOption:{type:[Boolean,Function],default:!1},defaultActiveFirstOption:{type:Boolean,default:!0},status:String}),N=a.defineComponent({compatConfig:{MODE:3},name:"AAutoComplete",inheritAttrs:!1,props:$(),slots:Object,setup(t,v){let{slots:e,attrs:O,expose:S}=v;n.warning(!("dataSource"in e),"AutoComplete","`dataSource` slot is deprecated, please use props `options` instead."),n.warning(!("options"in e),"AutoComplete","`options` slot is deprecated, please use props `options` instead."),n.warning(!t.dropdownClassName,"AutoComplete","`dropdownClassName` is deprecated, please use `popupClassName` instead.");const f=a.ref(),u=()=>{var l;const p=n.flattenChildren((l=e.default)===null||l===void 0?void 0:l.call(e));return p.length?p[0]:void 0};S({focus:()=>{var l;(l=f.value)===null||l===void 0||l.focus()},blur:()=>{var l;(l=f.value)===null||l===void 0||l.blur()}});const{prefixCls:r}=n.useConfigInject("select",t);return()=>{var l,p,C;const{size:o,dataSource:s,notFoundContent:c=(l=e.notFoundContent)===null||l===void 0?void 0:l.call(e)}=t;let d;const{class:_}=O,w={[_]:!!_,[`${r.value}-lg`]:o==="large",[`${r.value}-sm`]:o==="small",[`${r.value}-show-search`]:!0,[`${r.value}-auto-complete`]:!0};if(t.options===void 0){const b=((p=e.dataSource)===null||p===void 0?void 0:p.call(e))||((C=e.options)===null||C===void 0?void 0:C.call(e))||[];b.length&&x(b[0])?d=b:d=s?s.map(i=>{if(n.isValidElement(i))return i;switch(typeof i){case"string":return a.createVNode(m,{key:i,value:i},{default:()=>[i]});case"object":return a.createVNode(m,{key:i.value,value:i.value},{default:()=>[i.text]});default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}}):[]}const B=n.omit(n._extends(n._extends(n._extends({},t),O),{mode:A.Select.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:u,notFoundContent:c,class:w,popupClassName:t.popupClassName||t.dropdownClassName,ref:f}),["dataSource","loading"]);return a.createVNode(A.Select,B,n._objectSpread2({default:()=>[d]},n.omit(e,["default","dataSource","options"])))}}}),j=n._extends(N,{Option:m,OptGroup:h,install(t){return t.component(N.name,N),t.component(m.displayName,m),t.component(h.displayName,h),t}}),E=a.defineComponent({__name:"AutoCompleteInput",props:{title:{},value:{},fetchList:{type:[Function,Array]},style:{},enableSplit:{type:Boolean},splitWord:{},placeholder:{}},emits:["update:value"],setup(t,{emit:v}){const e=t,O=v,S=a.ref([]),f=a.ref([]);a.onMounted(async()=>{if(e.fetchList){if(e.fetchList instanceof Function){const o=await e.fetchList();S.value.push(...o)}else S.value.push(...e.fetchList);f.value=S.value}});const u=a.computed({get(){return e.value},set(o){O("update:value",o)}}),y=a.computed(()=>e.splitWord||","),g=a.computed(()=>e.title||""),r=a.computed(()=>!!e.enableSplit),l=(o,s)=>{var d;const c=r.value?(d=s.split(y.value).pop())==null?void 0:d.trim():s;return o.filter(_=>_.value.includes(c||"")&&_.value!==c)},p=o=>{if(r.value){const s=u.value?u.value.endsWith(y.value)?u.value.split(y.value).slice(0,-1):u.value.split(y.value):[],c=u.value?[...s,o].join(y.value):o;u.value=c}else u.value=o},C=o=>{f.value=l(S.value,o)};return(o,s)=>{const c=j;return a.openBlock(),a.createBlock(c,a.mergeProps({value:u.value,"onUpdate:value":s[0]||(s[0]=d=>u.value=d),placeholder:o.placeholder?o.placeholder:`输入${g.value}内容${r.value?"（以"+o.splitWord+"分割）":""} 或选择已有${g.value}`,onSelect:p,options:f.value,onSearch:C},{...o.$attrs,style:e.style}),null,16,["value","placeholder","options"])}}});exports.default=E;
